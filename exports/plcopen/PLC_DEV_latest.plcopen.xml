<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP21 Patch 4" creationDateTime="1970-01-01T00:00:00" />
  <contentHeader name="PLC_DEV.project" modificationDateTime="1970-01-01T00:00:00">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation>
          <property name="Project" type="string">PLC_DEV</property>
        </ProjectInformation>
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous />
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/application" handleUnknown="implementation">
      <resource name="Application">
        <task name="MainTask" interval="PT0.02S" priority="1">
          <pouInstance name="PLC_PRG" typeName="">
            <documentation>
              <xhtml xmlns="http://www.w3.org/1999/xhtml" />
            </documentation>
          </pouInstance>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
              <TaskSettings KindOfTask="Cyclic" Interval="t#20ms" IntervalUnit="ms" WithinSPSTimeSlicing="true">
                <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />
              </TaskSettings>
            </data>
          </addData>
        </task>
        <globalVars name="GVL_IO">
          <variable name="gIO">
            <type>
              <derived name="ST_IO" />
            </type>
          </variable>
          <variable name="gIsDev">
            <type>
              <BOOL />
            </type>
            <initialValue>
              <simpleValue value="FALSE" />
            </initialValue>
          </variable>
        </globalVars>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="ST_IO_IN">
              <baseType>
                <struct>
                  <variable name="StartPB">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="StopPB">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="EStop">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="LS_Extended">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="LS_Retracted">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="MotorFB">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="TankLevel">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0..100 %</xhtml>
                    </documentation>
                  </variable>
                  <variable name="Pressure">
                    <type>
                      <REAL />
                    </type>
                  </variable>
                  <variable name="ValvePosFB">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0..100 %</xhtml>
                    </documentation>
                  </variable>
                </struct>
              </baseType>
              <addData />
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="ST_IO_OUT">
              <baseType>
                <struct>
                  <variable name="MotorRun">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="Pump">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="CylExtend">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="CylRetract">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="ValveCmd">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0..100 %</xhtml>
                    </documentation>
                  </variable>
                  <variable name="VFD_SpeedCmd">
                    <type>
                      <REAL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> 0..100 %</xhtml>
                    </documentation>
                  </variable>
                </struct>
              </baseType>
              <addData />
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="ST_IO">
              <baseType>
                <struct>
                  <variable name="In">
                    <type>
                      <derived name="ST_IO_IN" />
                    </type>
                  </variable>
                  <variable name="Out">
                    <type>
                      <derived name="ST_IO_OUT" />
                    </type>
                  </variable>
                </struct>
              </baseType>
              <addData />
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="E_SIM_BOOL_MODE">
              <baseType>
                <enum>
                  <values>
                    <value name="FIXED" />
                    <value name="TOGGLE" />
                    <value name="PULSE" />
                  </values>
                </enum>
              </baseType>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/enumvaluedocumentation" handleUnknown="implementation">
                  <EnumValueDocumentation>
                    <EnumValue>
                      <Name>FIXED</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> always FixedValue (or OverrideValue)</xhtml>
                      </Documentation>
                    </EnumValue>
                    <EnumValue>
                      <Name>TOGGLE</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> flips true/false every ChangeEvery</xhtml>
                      </Documentation>
                    </EnumValue>
                    <EnumValue>
                      <Name>PULSE</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> true for PulseWidth every ChangeEvery</xhtml>
                      </Documentation>
                    </EnumValue>
                  </EnumValueDocumentation>
                </data>
              </addData>
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
            <dataType name="E_SIM_INT_MODE">
              <baseType>
                <enum>
                  <values>
                    <value name="FIXED" />
                    <value name="RAMP" />
                    <value name="RANDOM" />
                  </values>
                </enum>
              </baseType>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/enumvaluedocumentation" handleUnknown="implementation">
                  <EnumValueDocumentation>
                    <EnumValue>
                      <Name>FIXED</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> fixed value</xhtml>
                      </Documentation>
                    </EnumValue>
                    <EnumValue>
                      <Name>RAMP</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> add Increment every ChangeEvery</xhtml>
                      </Documentation>
                    </EnumValue>
                    <EnumValue>
                      <Name>RANDOM</Name>
                      <Documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml"> pseudo-random in range every ChangeEvery</xhtml>
                      </Documentation>
                    </EnumValue>
                  </EnumValueDocumentation>
                </data>
              </addData>
            </dataType>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="PLC_PRG" pouType="program">
              <interface>
                <localVars>
                  <variable name="Boot">
                    <type>
                      <derived name="FB_ModeBoot" />
                    </type>
                  </variable>
                  <variable name="IOMan">
                    <type>
                      <derived name="FB_IO_Manager" />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">// 1) Read ENV ONCE
Boot();

// 2) Route IO
IOMan(IsDev := gIsDev, CycleTime := T#20ms, IO := gIO);

// 3) Control logic


// ---------------- Control Logic ----------------
IF gIO.In.EStop THEN
    gIO.Out.MotorRun := FALSE;
    gIO.Out.Pump := FALSE;
    gIO.Out.CylExtend := FALSE;
    gIO.Out.CylRetract := FALSE;
    gIO.Out.ValveCmd := 0.0;
    gIO.Out.VFD_SpeedCmd := 0.0;
ELSE
    IF gIO.In.StartPB THEN
        gIO.Out.MotorRun := TRUE;
        gIO.Out.Pump := TRUE;
        gIO.Out.VFD_SpeedCmd := 60.0;
        gIO.Out.ValveCmd := 10.0;
    END_IF

    IF gIO.In.StopPB THEN
        gIO.Out.MotorRun := FALSE;
        gIO.Out.Pump := FALSE;
        gIO.Out.VFD_SpeedCmd := 0.0;
        gIO.Out.ValveCmd := 0.0;
    END_IF

    gIO.Out.CylExtend := gIO.Out.MotorRun;
    gIO.Out.CylRetract := NOT gIO.Out.MotorRun;
END_IF</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_IO_Prod" pouType="functionBlock">
              <interface>
                <inOutVars>
                  <variable name="IO">
                    <type>
                      <derived name="ST_IO" />
                    </type>
                  </variable>
                </inOutVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">// ================= READ PROD INPUTS =================
// Map your physical / fieldbus / Modbus / MQTT inputs here
// Example:
 IO.In.StartPB      := TRUE;
// IO.In.StopPB       := DI_StopPB;
// IO.In.EStop        := DI_EStop;
// IO.In.LS_Extended  := DI_LS_Extended;
// IO.In.LS_Retracted := DI_LS_Retracted;
// IO.In.MotorFB      := DI_MotorFB;
//
// IO.In.TankLevel    := AI_TankLevel;
// IO.In.Pressure     := AI_Pressure;
// IO.In.ValvePosFB   := AI_ValvePosFB;

// ================= WRITE PROD OUTPUTS =================
// Example:
// DO_MotorRun     := IO.Out.MotorRun;
// DO_Pump         := IO.Out.Pump;
// DO_CylExtend    := IO.Out.CylExtend;
// DO_CylRetract   := IO.Out.CylRetract;
//
// AO_ValveCmd     := IO.Out.ValveCmd;
// AO_VFD_SpeedCmd := IO.Out.VFD_SpeedCmd;</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_IO_Manager" pouType="functionBlock">
              <interface>
                <inputVars>
                  <variable name="IsDev">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="CycleTime">
                    <type>
                      <TIME />
                    </type>
                    <initialValue>
                      <simpleValue value="TIME#20ms" />
                    </initialValue>
                  </variable>
                </inputVars>
                <inOutVars>
                  <variable name="IO">
                    <type>
                      <derived name="ST_IO" />
                    </type>
                  </variable>
                </inOutVars>
                <localVars>
                  <variable name="Sim">
                    <type>
                      <derived name="FB_IO_Sim" />
                    </type>
                  </variable>
                  <variable name="Prod">
                    <type>
                      <derived name="FB_IO_Prod" />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF IsDev THEN
    Sim(IO := IO);
ELSE
    Prod(IO := IO);
END_IF</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_ModeBoot" pouType="functionBlock">
              <interface>
                <outputVars>
                  <variable name="Done">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </outputVars>
                <localVars>
                  <variable name="init">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="outBuf">
                    <type>
                      <string length="64" />
                    </type>
                  </variable>
                  <variable name="res">
                    <type>
                      <DINT />
                    </type>
                  </variable>
                  <variable name="n">
                    <type>
                      <DINT />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF Done THEN RETURN; END_IF
IF NOT init THEN
    init := TRUE;

    gIsDev := FALSE;
    outBuf := '';

    n := SysProcessExecuteCommand2(
        pszCommand := 'cat /conf/codesyscontrol/env.txt',
        pszStdOut := outBuf,
        udiStdOutLen := SIZEOF(outBuf),
        pResult := ADR(res)
    );

    IF (res = 0) AND (n &gt;= 3) THEN
        IF (LEFT(outBuf, 3) = 'dev') OR (LEFT(outBuf, 3) = 'DEV') THEN
            gIsDev := TRUE;
        END_IF
    END_IF

    Done := TRUE;
END_IF
</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_IO_Sim" pouType="functionBlock">
              <interface>
                <inOutVars>
                  <variable name="IO">
                    <type>
                      <derived name="ST_IO" />
                    </type>
                  </variable>
                </inOutVars>
                <localVars>
                  <variable name="StartPB_Sim">
                    <type>
                      <derived name="FB_SimBool_Gen" />
                    </type>
                  </variable>
                  <variable name="StartPB_Value">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                  <variable name="TankLevel_Sim">
                    <type>
                      <derived name="FB_SimInt_Gen" />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml" />
                </ST>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/cfc" handleUnknown="implementation">
                    <CFC page-oriented="true">
                      <vendorElement localId="0">
                        <position x="0" y="0" />
                        <alternativeText>
                          <xhtml xmlns="http://www.w3.org/1999/xhtml">page</xhtml>
                        </alternativeText>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpage" handleUnknown="implementation">
                            <page name="BOOL SIM" description="" marginwidth="12" width="72" height="96" index="0" xmlns="" />
                          </data>
                        </addData>
                      </vendorElement>
                      <vendorElement localId="1">
                        <position x="0" y="0" />
                        <alternativeText>
                          <xhtml xmlns="http://www.w3.org/1999/xhtml">page</xhtml>
                        </alternativeText>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpage" handleUnknown="implementation">
                            <page name="INT SIM" description="" marginwidth="12" width="72" height="96" index="1" xmlns="" />
                          </data>
                        </addData>
                      </vendorElement>
                      <inVariable localId="4">
                        <position x="1" y="9" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TRUE</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="3" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="4" formalParameter="TRUE" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="6">
                        <position x="1" y="11" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>E_SIM_BOOL_MODE.FIXED</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="5" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="6" formalParameter="E_SIM_BOOL_MODE.FIXED" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="8">
                        <position x="1" y="14" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TRUE</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="7" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="8" formalParameter="TRUE" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="10">
                        <position x="1" y="15" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TRUE</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="9" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="10" formalParameter="TRUE" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="12">
                        <position x="1" y="16" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>StartPB_Value</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="11" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="12" formalParameter="StartPB_Value" />
                        </connectionPointIn>
                      </connector>
                      <block localId="2" executionOrderId="1" typeName="FB_SimBool_Gen" instanceName="StartPB_Sim">
                        <position x="27" y="8" />
                        <inputVariables>
                          <variable formalParameter="Enable">
                            <connectionPointIn>
                              <relPosition x="0" y="0" />
                              <connection refLocalId="3" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="Mode">
                            <connectionPointIn>
                              <relPosition x="0" y="1" />
                              <connection refLocalId="5" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="ChangeEvery">
                            <connectionPointIn>
                              <relPosition x="0" y="2" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="PulseWidth">
                            <connectionPointIn>
                              <relPosition x="0" y="3" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="FixedValue">
                            <connectionPointIn>
                              <relPosition x="0" y="4" />
                              <connection refLocalId="7" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="OverrideEn">
                            <connectionPointIn>
                              <relPosition x="0" y="5" />
                              <connection refLocalId="9" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="OverrideValue">
                            <connectionPointIn>
                              <relPosition x="0" y="6" />
                              <connection refLocalId="11" />
                            </connectionPointIn>
                          </variable>
                        </inputVariables>
                        <inOutVariables />
                        <outputVariables>
                          <variable formalParameter="Value">
                            <connectionPointOut>
                              <relPosition x="0" y="0" />
                              <expression />
                            </connectionPointOut>
                          </variable>
                        </outputVariables>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="content" xmlns="" />
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/cfccalltype" handleUnknown="implementation">
                            <CallType xmlns="">functionblock</CallType>
                          </data>
                        </addData>
                      </block>
                      <connector localId="14" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="2" formalParameter="Value" />
                        </connectionPointIn>
                      </connector>
                      <outVariable localId="13" executionOrderId="2">
                        <position x="43" y="10" />
                        <connectionPointIn>
                          <relPosition x="0" y="0" />
                          <connection refLocalId="14" />
                        </connectionPointIn>
                        <expression>IO.In.StartPB</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="0" pageArea="contentRight" xmlns="" />
                          </data>
                        </addData>
                      </outVariable>
                      <inVariable localId="17">
                        <position x="1" y="8" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TRUE</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="16" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="17" formalParameter="TRUE" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="19">
                        <position x="1" y="10" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>E_SIM_INT_MODE.RAMP</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="18" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="19" formalParameter="E_SIM_INT_MODE.RAMP" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="21">
                        <position x="19" y="11" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>0</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="20" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="21" formalParameter="0" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="23">
                        <position x="19" y="12" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>100</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="22" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="23" formalParameter="100" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="25">
                        <position x="20" y="13" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>1</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="24" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="25" formalParameter="1" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="27">
                        <position x="16" y="14" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TIME#1000ms</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="26" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="27" formalParameter="TIME#1000ms" />
                        </connectionPointIn>
                      </connector>
                      <inVariable localId="29">
                        <position x="18" y="15" />
                        <connectionPointOut>
                          <expression />
                        </connectionPointOut>
                        <expression>TRUE</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentLeft" xmlns="" />
                          </data>
                        </addData>
                      </inVariable>
                      <connector localId="28" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="29" formalParameter="TRUE" />
                        </connectionPointIn>
                      </connector>
                      <block localId="15" executionOrderId="3" typeName="FB_SimInt_Gen" instanceName="TankLevel_Sim">
                        <position x="32" y="7" />
                        <inputVariables>
                          <variable formalParameter="Enable">
                            <connectionPointIn>
                              <relPosition x="0" y="0" />
                              <connection refLocalId="16" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="Mode">
                            <connectionPointIn>
                              <relPosition x="0" y="1" />
                              <connection refLocalId="18" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="MinValue">
                            <connectionPointIn>
                              <relPosition x="0" y="2" />
                              <connection refLocalId="20" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="MaxValue">
                            <connectionPointIn>
                              <relPosition x="0" y="3" />
                              <connection refLocalId="22" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="Increment">
                            <connectionPointIn>
                              <relPosition x="0" y="4" />
                              <connection refLocalId="24" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="ChangeEvery">
                            <connectionPointIn>
                              <relPosition x="0" y="5" />
                              <connection refLocalId="26" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="Wrap">
                            <connectionPointIn>
                              <relPosition x="0" y="6" />
                              <connection refLocalId="28" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="FixedValue">
                            <connectionPointIn>
                              <relPosition x="0" y="7" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="OverrideEn">
                            <connectionPointIn>
                              <relPosition x="0" y="8" />
                            </connectionPointIn>
                          </variable>
                          <variable formalParameter="OverrideValue">
                            <connectionPointIn>
                              <relPosition x="0" y="9" />
                            </connectionPointIn>
                          </variable>
                        </inputVariables>
                        <inOutVariables />
                        <outputVariables>
                          <variable formalParameter="Value">
                            <connectionPointOut>
                              <relPosition x="0" y="0" />
                              <expression />
                            </connectionPointOut>
                          </variable>
                        </outputVariables>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="content" xmlns="" />
                          </data>
                          <data name="http://www.3s-software.com/plcopenxml/cfccalltype" handleUnknown="implementation">
                            <CallType xmlns="">functionblock</CallType>
                          </data>
                        </addData>
                      </block>
                      <connector localId="31" name="">
                        <position x="0" y="0" />
                        <connectionPointIn>
                          <connection refLocalId="15" formalParameter="Value" />
                        </connectionPointIn>
                      </connector>
                      <outVariable localId="30" executionOrderId="4">
                        <position x="43" y="9" />
                        <connectionPointIn>
                          <relPosition x="0" y="0" />
                          <connection refLocalId="31" />
                        </connectionPointIn>
                        <expression>IO.In.TankLevel</expression>
                        <addData>
                          <data name="http://www.3s-software.com/plcopenxml/cfcpageinfo" handleUnknown="implementation">
                            <pageInfo pageId="1" pageArea="contentRight" xmlns="" />
                          </data>
                        </addData>
                      </outVariable>
                    </CFC>
                  </data>
                </addData>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_SimInt_Gen" pouType="functionBlock">
              <interface>
                <inputVars>
                  <variable name="Enable">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="TRUE" />
                    </initialValue>
                  </variable>
                  <variable name="Mode">
                    <type>
                      <derived name="E_SIM_INT_MODE" />
                    </type>
                    <initialValue>
                      <simpleValue value="E_SIM_INT_MODE.RAMP" />
                    </initialValue>
                  </variable>
                  <variable name="MinValue">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="0" />
                    </initialValue>
                  </variable>
                  <variable name="MaxValue">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="100" />
                    </initialValue>
                  </variable>
                  <variable name="Increment">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="1" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> used by RAMP</xhtml>
                    </documentation>
                  </variable>
                  <variable name="ChangeEvery">
                    <type>
                      <TIME />
                    </type>
                    <initialValue>
                      <simpleValue value="TIME#200ms" />
                    </initialValue>
                  </variable>
                  <variable name="Wrap">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="TRUE" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> RAMP behavior: wrap or clamp</xhtml>
                    </documentation>
                  </variable>
                  <variable name="FixedValue">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="0" />
                    </initialValue>
                  </variable>
                  <variable name="OverrideEn">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                  </variable>
                  <variable name="OverrideValue">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="0" />
                    </initialValue>
                  </variable>
                </inputVars>
                <outputVars>
                  <variable name="Value">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </outputVars>
                <localVars>
                  <variable name="tPeriod">
                    <type>
                      <derived name="TON" />
                    </type>
                  </variable>
                  <variable name="seedInt">
                    <type>
                      <INT />
                    </type>
                    <initialValue>
                      <simpleValue value="12345" />
                    </initialValue>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> random seed kept as INT only</xhtml>
                    </documentation>
                  </variable>
                  <variable name="span">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="nextVal">
                    <type>
                      <INT />
                    </type>
                  </variable>
                  <variable name="tmp">
                    <type>
                      <INT />
                    </type>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">// ---------- guards ----------
IF NOT Enable THEN
    Value := MinValue;
    RETURN;
END_IF

IF OverrideEn THEN
    Value := OverrideValue;
    RETURN;
END_IF

IF MaxValue &lt; MinValue THEN
    Value := MinValue;
    RETURN;
END_IF

// ---------- timing ----------
tPeriod(IN := TRUE, PT := ChangeEvery);
IF NOT tPeriod.Q THEN
    RETURN;
END_IF
tPeriod(IN := FALSE); // restart timer

// ---------- mode ----------
CASE Mode OF

E_SIM_INT_MODE.FIXED:
    Value := FixedValue;

E_SIM_INT_MODE.RAMP:
    nextVal := Value + Increment;

    IF Wrap THEN
        span := MaxValue - MinValue + 1;
        IF span &lt;= 0 THEN span := 1; END_IF
        WHILE nextVal &gt; MaxValue DO
            nextVal := nextVal - span;
        END_WHILE
        WHILE nextVal &lt; MinValue DO
            nextVal := nextVal + span;
        END_WHILE
    ELSE
        IF nextVal &gt; MaxValue THEN nextVal := MaxValue; END_IF
        IF nextVal &lt; MinValue THEN nextVal := MinValue; END_IF
    END_IF

    Value := nextVal;

E_SIM_INT_MODE.RANDOM:
    // simple INT LCG (stays in INT domain)
    seedInt := seedInt * 109 + 89;

    // make it non-negative
    IF seedInt &lt; 0 THEN
        seedInt := -seedInt;
    END_IF

    span := MaxValue - MinValue + 1;
    IF span &lt;= 0 THEN span := 1; END_IF

    // reduce into 0..span-1 using subtraction (no MOD needed)
    tmp := seedInt;
    WHILE tmp &gt;= span DO
        tmp := tmp - span;
    END_WHILE

    Value := MinValue + tmp;

END_CASE</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
            <pou name="FB_SimBool_Gen" pouType="functionBlock">
              <interface>
                <inputVars>
                  <variable name="Enable">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="TRUE" />
                    </initialValue>
                  </variable>
                  <variable name="Mode">
                    <type>
                      <derived name="E_SIM_BOOL_MODE" />
                    </type>
                    <initialValue>
                      <simpleValue value="E_SIM_BOOL_MODE.TOGGLE" />
                    </initialValue>
                  </variable>
                  <variable name="ChangeEvery">
                    <type>
                      <TIME />
                    </type>
                    <initialValue>
                      <simpleValue value="TIME#2s0ms" />
                    </initialValue>
                  </variable>
                  <variable name="PulseWidth">
                    <type>
                      <TIME />
                    </type>
                    <initialValue>
                      <simpleValue value="TIME#150ms" />
                    </initialValue>
                  </variable>
                  <variable name="FixedValue">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                  </variable>
                  <variable name="OverrideEn">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                  </variable>
                  <variable name="OverrideValue">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                  </variable>
                </inputVars>
                <outputVars>
                  <variable name="Value">
                    <type>
                      <BOOL />
                    </type>
                  </variable>
                </outputVars>
                <localVars>
                  <variable name="tPeriod">
                    <type>
                      <derived name="TON" />
                    </type>
                  </variable>
                  <variable name="tPulse">
                    <type>
                      <derived name="TON" />
                    </type>
                  </variable>
                  <variable name="state">
                    <type>
                      <BOOL />
                    </type>
                    <initialValue>
                      <simpleValue value="FALSE" />
                    </initialValue>
                  </variable>
                </localVars>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF NOT Enable THEN
    Value := FALSE;
    RETURN;
END_IF

IF OverrideEn THEN
    Value := OverrideValue;
    RETURN;
END_IF

CASE Mode OF

E_SIM_BOOL_MODE.FIXED:
    Value := FixedValue;

E_SIM_BOOL_MODE.TOGGLE:
    tPeriod(IN := TRUE, PT := ChangeEvery);
    IF tPeriod.Q THEN
        state := NOT state;
        tPeriod(IN := FALSE);
    END_IF
    Value := state;

E_SIM_BOOL_MODE.PULSE:
    tPeriod(IN := TRUE, PT := ChangeEvery);
    IF tPeriod.Q THEN
        tPulse(IN := TRUE, PT := PulseWidth);
        tPeriod(IN := FALSE);
    END_IF
    tPulse(IN := tPulse.IN, PT := PulseWidth);
    Value := tPulse.Q;

END_CASE
</xhtml>
                </ST>
              </body>
              <addData />
            </pou>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
            <Libraries>
              <Library Name="#Standard" Namespace="Standard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="Standard, * (System)" />
              <Library Name="#BreakpointLogging" Namespace="BPLog" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Breakpoint Logging Functions, * (3S - Smart Software Solutions GmbH)" />
              <Library Name="#IoStandard" Namespace="IoStandard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="true" DefaultResolution="IoStandard, 3.5.17.0 (System)" />
              <Library Name="#3SLicense" Namespace="_3S_LICENSE" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="3SLicense, 0.0.0.0 (CODESYS)" ResolverGuid="97c3b452-d9fa-4ac2-9d0c-3d420aa6d95b" />
              <Library Name="#CAA Device Diagnosis" Namespace="DED" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="CAA Device Diagnosis, 3.5.21.0 (CAA Technical Workgroup)" />
              <Library Name="#SysProcess" Namespace="SysProcess" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="SysProcess, * (System)" />
              <PlaceholderRedirections>
  <PlaceholderRedirection Placeholder="IoDrvProfinetBase" Redirection="IoDrvProfinetBase, 4.7.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="IoDrvProfinetDevice" Redirection="IoDrvProfinetDevice, 4.7.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="Profinet" Redirection="Profinet, 4.7.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="ProfinetCommon" Redirection="ProfinetCommon, 4.7.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="ProfinetDevice" Redirection="ProfinetDevice, 4.6.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="RPC" Redirection="Remote Procedure Calls, 4.6.0.0 (CODESYS)" />
  <PlaceholderRedirection Placeholder="Standard" Redirection="Standard, 3.5.18.0 (System)" />
  <PlaceholderRedirection Placeholder="StringUtils" Redirection="StringUtils, 3.5.20.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElem3DPath" Redirection="VisuElem3DPath, 4.7.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemCamDisplayer" Redirection="VisuElemCamDisplayer, 4.7.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemMeter" Redirection="VisuElemMeter, 4.7.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemTextEditor" Redirection="VisuElemTextEditor, 4.8.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemTrace" Redirection="VisuElemTrace, 4.8.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemXYChart" Redirection="VisuElemXYChart, 4.8.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElems" Redirection="VisuElems, 4.8.1.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemsAlarm" Redirection="VisuElemsAlarm, 4.8.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemsDateTime" Redirection="VisuElemsDateTime, 4.8.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemsSpecialControls" Redirection="VisuElemsSpecialControls, 4.7.0.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuElemsWinControls" Redirection="VisuElemsWinControls, 4.8.1.0 (System)" />
  <PlaceholderRedirection Placeholder="System_VisuNativeControl" Redirection="VisuNativeControl, 4.8.0.0 (System)" />
  <PlaceholderRedirections>
</PlaceholderRedirections>
              <addData />
            </Libraries>
          </data>
        </addData>
      </resource>
    </data>
  </addData>
</project>